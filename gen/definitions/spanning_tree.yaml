# Manual code: getDeletedItems, addDeletedItemsXML, getDeletePaths, addDeletePathsXML in model_iosxe_spanning_tree.go
# have template markers removed. When VLANs removed from config, only priority is deleted to prevent "no spanning-tree vlan X".
---
name: Spanning Tree
path: /Cisco-IOS-XE-native:native/spanning-tree
no_delete: true
request_timeout: 1800
test_tags: [C9000V]
doc_category: Switching
attributes:
  - yang_name: Cisco-IOS-XE-spanning-tree:mode
    example: mst
  - yang_name: Cisco-IOS-XE-spanning-tree:logging
    example: true
  - yang_name: Cisco-IOS-XE-spanning-tree:loopguard/default
    example: true
  - yang_name: Cisco-IOS-XE-spanning-tree:portfast/default
    example: true
  - yang_name: Cisco-IOS-XE-spanning-tree:portfast/bpduguard/default
    example: true
  - yang_name: Cisco-IOS-XE-spanning-tree:extend/system-id
    example: true
    no_delete: true
  - yang_name: Cisco-IOS-XE-spanning-tree:mst/configuration/instance
    tf_name: mst_instances
    type: List
    attributes:
      - yang_name: id
        id: true
        example: 1
      - yang_name: vlan-ids
        example: 10
  - yang_name: Cisco-IOS-XE-spanning-tree:vlan
    tf_name: vlans
    type: List
    no_delete: true
    attributes:
      - yang_name: id
        id: true
        example: "10"
      - yang_name: priority
        example: 32768
  # disabled_vlans uses INVERSE logic: presence in config sends DELETE operation
  # to disable STP on the VLAN (no spanning-tree vlan X). Requires custom code
  # in model file - no yang_name means it's skipped in standard body building.
  - tf_name: disabled_vlans
    type: List
    description: VLANs to explicitly disable from spanning-tree. Uses inverse logic - presence in config sends DELETE operation (no spanning-tree vlan X). Removing from config allows VLANs to revert to default STP behavior.
    exclude_test: true
    attributes:
      - tf_name: id
        type: String
        id: true
        description: VLAN ID to disable from spanning-tree
        example: "30"
    